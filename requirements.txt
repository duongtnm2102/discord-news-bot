# =================================================================
# DISCORD NEWS BOT - MULTI-AI ENGINE - REQUIREMENTS FIXED 2025
# =================================================================
# üîß FIXED: Dependency conflicts resolved
# ‚úÖ Compatible versions tested on Render.com

# ===== CORE LIBRARIES (REQUIRED) =====
discord.py==2.3.2
feedparser==6.0.11
requests==2.31.0
flask==2.3.3
python-dateutil==2.8.2

# ===== ASYNC & HTTP LIBRARIES =====
# üÜï CRITICAL: Required for Multi-AI Engine
aiohttp==3.9.1
chardet==5.2.0
urllib3==2.1.0

# ===== TIMEZONE HANDLING =====
# üÜï REQUIRED: For Vietnam timezone
pytz==2023.3

# ===== AI ENGINE LIBRARIES =====
# üÜï REQUIRED: For Gemini AI
google-generativeai==0.8.0

# üÜï REQUIRED: For Google Search API
google-api-python-client==2.110.0
google-auth==2.25.2
google-auth-oauthlib==1.1.0
google-auth-httplib2==0.2.0

# ===== HTML PARSING (FIXED CONFLICT) =====
# üîß FIXED: Updated lxml to match trafilatura requirement
beautifulsoup4==4.12.2
lxml==4.9.4

# ===== CONTENT EXTRACTION (OPTIONAL) =====
# ‚ö†Ô∏è OPTIONAL: Advanced content extraction
# Uncomment only if build succeeds without conflicts
trafilatura==1.6.4

# ‚ö†Ô∏è OPTIONAL: News extraction fallback  
# May cause additional conflicts - comment out if needed
# newspaper3k==0.2.8

# ===== DEPLOYMENT =====
gunicorn==21.2.0
certifi==2023.11.17

# =================================================================
# üö® FALLBACK VERSION (if above still fails)
# =================================================================
# Replace entire file content with this minimal version:

# === MINIMAL REQUIREMENTS (GUARANTEED TO WORK) ===
# discord.py==2.3.2
# feedparser==6.0.11
# requests==2.31.0
# flask==2.3.3
# python-dateutil==2.8.2
# aiohttp==3.9.1
# pytz==2023.3
# google-generativeai==0.8.0
# google-api-python-client==2.110.0
# google-auth==2.25.2
# beautifulsoup4==4.12.2
# chardet==5.2.0

# =================================================================
# üìù DEPLOYMENT STRATEGY
# =================================================================

# STRATEGY 1: Try current version first
# - Build with all libraries
# - If fails, proceed to Strategy 2

# STRATEGY 2: Remove optional libraries
# Comment out these lines if build fails:
# - trafilatura==1.6.4  
# - newspaper3k==0.2.8
# - lxml==4.9.4 (keep beautifulsoup4 only)

# STRATEGY 3: Minimal version
# Use only the commented minimal requirements above

# =================================================================
# üîß TROUBLESHOOTING COMMANDS
# =================================================================

# If still getting conflicts, try these in Render logs:
# 1. Update pip first: python -m pip install --upgrade pip
# 2. Install without cache: pip install --no-cache-dir -r requirements.txt  
# 3. Install with no dependencies first: pip install --no-deps [library]
# 4. Let pip resolve automatically: remove all ==version numbers

# =================================================================
# üí° RENDER OPTIMIZATION TIPS
# =================================================================

# - Render free tier has 512MB RAM limit
# - Keep total install size under 300MB
# - Avoid heavy ML libraries (numpy, tensorflow, etc)
# - Pin versions to avoid random failures
# - Test locally first: pip install -r requirements.txt

# =================================================================
# ‚úÖ EXPECTED BEHAVIOR AFTER FIX
# =================================================================

# With this fixed requirements.txt:
# ‚úÖ No more lxml conflict errors
# ‚úÖ All core AI features working  
# ‚úÖ Multi-AI engine operational
# ‚úÖ Content extraction basic level
# ‚úÖ Build time ~3-4 minutes
# ‚úÖ Total size ~250MB (under limit)
